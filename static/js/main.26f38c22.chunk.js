(this["webpackJsonpimage-processing-prototyper"]=this["webpackJsonpimage-processing-prototyper"]||[]).push([[0],{25:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},34:function(e,n,t){e.exports=t(47)},39:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(3),i=t.n(r),c=(t(39),t(8)),s=t(25),d=t.n(s),l=(t(40),t(26)),u=t.n(l),p=t(73),g=t(29),m=t(6),v=t(76),f=t(75),w="card",h=(t(41),t(74)),b=function(e){var n=e.id,t=e.text,o=e.moveCard,r=e.findCard,i=e.deleteCard,s=e.processingOptions,d=e.updateCard,l=r(n).index,u=Object(f.a)({item:{type:w,id:n,originalIndex:l},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,n){var t=n.getItem(),a=t.id,r=t.originalIndex;n.didDrop()||o(a,r)}}),p=Object(c.a)(u,2),g=p[0].isDragging,m=p[1],b=Object(v.a)({accept:w,canDrop:function(){return!1},hover:function(e){var t=e.id;if(t!==n){var a=r(n).index;o(t,a)}}}),E=Object(c.a)(b,2)[1],O=g?0:1;return a.a.createElement("div",{ref:function(e){return m(E(e))},style:{opacity:O},className:"card"},t,a.a.createElement("span",{className:"delete-button",onClick:function(){i(n)}},a.a.createElement("p",{className:"fa fa-trash"})),a.a.createElement("br",null),a.a.createElement("div",{className:"hello"},Object.keys(s).map((function(e){return a.a.createElement(h.a,{key:n+"-"+e,id:n+"-"+e,label:e,type:"number",placeholder:s[e].toString(),variant:"outlined",onChange:function(t){console.log("received a change with the value: ".concat(t.target.value," of type ").concat(typeof t.target.value," for property ").concat(e)),d(n,e,Number.parseInt(t.target.value))},InputLabelProps:{shrink:!0},style:{marginTop:"5px"}})}))))},E=t(16),O=t.n(E),y=function(e){var n=e.cards,t=e.setCards,o=function(e,o){var a=i(e),r=a.card,c=a.index;t(O()(n,{$splice:[[c,1],[o,0,r]]}))},r=function(e){var o=i(e),a=(o.card,o.index);console.log("aiyoh ".concat(e," kena delete")),t(O()(n,{$splice:[[a,1]]}))},i=function(e){var t=n.filter((function(n){return"".concat(n.id)===e}))[0];return{card:t,index:n.indexOf(t)}},s=function(e,o,a){var r=i(e),c=(r.card,r.index);console.log("got a value of ".concat(a," for property ").concat(o," in updateCard")),t(O()(n,Object(m.a)({},c,{processingOptions:Object(m.a)({},o,{$set:a})})))},d=Object(v.a)({accept:w,drop:function(){}}),l=Object(c.a)(d,2)[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:l,className:"drag-and-drop-container"},a.a.createElement("h2",null,"Algorithms to run on input video (in order from top to bottom)"),n.map((function(e){return a.a.createElement(b,{key:e.id,id:"".concat(e.id),text:e.text,moveCard:o,findCard:i,deleteCard:r,processingOptions:e.processingOptions,updateCard:s})}))))},x=function(e){var n=e.cards;return a.a.createElement("div",{className:"daPipeline"},n.map((function(e,n){return a.a.createElement("canvas",{key:"intermediate-output-"+n,id:"intermediate-output-"+n})})))};function C(e){if("undefined"===typeof e)e="";else if("number"===typeof e)isNaN(e)||"undefined"!==typeof cv&&(e="Exception: "+window.cv.exceptionFromPtr(e).msg);else if("string"===typeof e){var n=Number(e.split(" ")[0]);isNaN(n)||"undefined"!==typeof cv&&(e="Exception: "+window.cv.exceptionFromPtr(n).msg)}else e instanceof Error&&(e=e.stack.replace(/\n/g,"<br>"));return e}var _={_cannyEdgeDetection:function(e,n,t){window.cv.Canny(e,n,t.lowerThreshold,t.upperThreshold,t.sobelApertureSize,t.moreAccurateGradient)},_histogramEqualization:function(e,n,t){window.cv.cvtColor(e,e,window.cv.COLOR_RGBA2GRAY,0),window.cv.equalizeHist(e,n)},_medianFilter:function(e,n,t){window.cv.medianBlur(e,n,t.kernelSize)},_convertRGBToGray:function(e,n,t){window.cv.cvtColor(e,n,window.cv.COLOR_RGBA2GRAY,0)},_simpleBinaryThresholding:function(e,n,t){window.cv.threshold(e,n,t.threshVal,255,window.cv.THRESH_BINARY)},_otsuThresholding:function(e,n,t){window.cv.cvtColor(e,e,window.cv.COLOR_RGBA2GRAY,0),window.cv.threshold(e,n,69,255,window.cv.THRESH_OTSU)},_adaptiveThresholding:function(e,n,t){window.cv.cvtColor(e,e,window.cv.COLOR_RGBA2GRAY,0),window.cv.adaptiveThreshold(e,n,255,window.cv.ADAPTIVE_THRESH_GAUSSIAN_C,window.cv.THRESH_BINARY,t.kernelSize,t.C)}};function k(e,n,t,o){console.debug("---- Executing algorithm: ".concat(o," ----")),console.debug("showing some debug information for the algorithm to execute"),console.debug("input canvas:"),console.debug(e),console.debug("output canvas:"),console.debug(document.getElementById(n)),console.debug("function to execute:"),console.debug(o),console.debug("================");var a=window.cv.imread(e),r=new window.cv.Mat;return o(a,r,t),window.cv.imshow(n,r),a.delete(),r.delete(),document.getElementById(n)}var A=[{id:1,text:"RGB to Grayscale",processingOptions:{}},{id:2,text:"Histogram Equalization",processingOptions:{}},{id:3,text:"Simple Image Thresholding",processingOptions:{threshVal:127}},{id:4,text:"Median Filtering",processingOptions:{kernelSize:5}},{id:5,text:"Canny Edge Detection",processingOptions:{lowerThreshold:50,upperThreshold:100,sobelApertureSize:3,moreAccurateGradient:!1}},{id:6,text:"Otsu Binarization",processingOptions:{}},{id:7,text:"Adaptive Thresholding",processingOptions:{kernelSize:3,C:2}}];function R(e){var n=function(){};switch(e){case 1:n=_._convertRGBToGray;break;case 2:n=_._histogramEqualization;break;case 3:n=_._simpleBinaryThresholding;break;case 4:n=_._medianFilter;break;case 5:n=_._cannyEdgeDetection;break;case 6:n=_._otsuThresholding;break;case 7:n=_._adaptiveThresholding}return n}var T=function(){Object(o.useEffect)((function(){if(window.webcam||(window.webcam=e.current),window.cv){console.log("opencv loaded");var n=setInterval((function(){var e=window.webcam.getCanvas();if(e){var n=e;console.log(r),console.log(r.length);for(var t=0;t<r.length;t++){var o=r[t];try{var a=R(o.id);n=k(n,"intermediate-output-"+t,o.processingOptions,a)}catch(i){console.error("Error using algorithm of id ".concat(o.id,", error message: ").concat(C(i)))}}}}),50);return function(){return clearInterval(n)}}console.log("opencv not loaded, will exit")}));var e=a.a.useRef(null),n=Object(o.useState)(A),t=Object(c.a)(n,2),r=t[0],i=t[1];return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:d.a,className:"App-logo",alt:"logo"}),a.a.createElement("div",{className:"processing-interface"},a.a.createElement("div",{className:"video-pipeline"},a.a.createElement("h2",null,"Video Input and Intermediate Outputs (in order from top to bottom)"),a.a.createElement(u.a,{audio:!1,ref:e,screenshotFormat:"image/jpeg",videoConstraints:{width:1280,height:720,facingMode:"user"},onUserMedia:function(){window.webcam=e.current}}),a.a.createElement(x,{cards:r})),a.a.createElement(p.a,{backend:g.a},a.a.createElement(y,{cards:r,setCards:i})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.26f38c22.chunk.js.map